(function(){var k=Barge.Array,a=Barge.Dom,d=a.getEl("#clock"),m=d.querySelector(".alarm"),p=d.querySelector(".ampm"),b=a.getEl("#alarm-dialog").parentElement,q=a.getEl("#alarm-set"),r=a.getEl("#alarm-clear"),l=a.getEl("#time-is-up").parentElement,g=-1,f="zero one two three four five six seven eight nine".split(" "),e={},n=d.querySelector(".digits");k.forEach("h1 h2 : m1 m2 : s1 s2".split(" "),function(b,h){if(":"===b)n.appendChild(a.createEl("div",{className:"dots"}));else{h=a.createEl("<div>");for(var c=
1;8>c;c++)h.append(a.createEl("span",{className:"d"+c}));e[b]=h;n.appendChild(h)}});var t=d.querySelector(".weekdays");k.forEach("MON TUE WED THU FRI SAT SUN".split(" "),function(b){t.appendChild(a.createEl("span",{innerHTML:b}))});var u=d.querySelector(".weekdays span");(function h(){var c=moment().format("hhmmssdA");e.h1["class"]=f[c[0]];e.h2["class"]=f[c[1]];e.m1["class"]=f[c[2]];e.m2["class"]=f[c[3]];e.s1["class"]=f[c[4]];e.s2["class"]=f[c[5]];var b=c[6];b--;0>b&&(b=6);a.removeClass(u,"active");
(function(a){return 0<=a&&a<this.length?this[a]:-1})(b);p.innerHTML=c[7]+c[8];if(0<g)g--,a.addClass(m,"active");else{if(0===g){a.openWin(l);try{var d=a.getEl("#alarm-ring");console.log(d);d.play();setInterval(function(){d.play()},100)}catch(v){}g--}a.removeClass(m,"active")}setTimeout(h,1E3)})();a.getEl("#switch-theme").onclick=function(){a.toggleClass(d,"light dark")};a.getEl(".alarm-button").onclick=function(){a.openWin(b)};b.querySelector(".close").onclick=function(){a.closeWin(b)};q.onclick=function(){var d=
!0,c=0,e=[3600,60,1],f=b.querySelectorAll("input");b.querySelector("input");k.forEach(f,function(a,b){if(this.validity&&!this.validity.valid)return d=!1,this.focus(),!1;c+=e[b]*parseInt(parseInt(a.value))});d?1>c?alert("Please choose a time in the future!"):(g=c,a.closeWin(b)):alert("Please enter a valid number!")};r.onclick=function(){g=-1;a.closeWin(b)};l.onclick=function(){a.closeWin(l)}})();
