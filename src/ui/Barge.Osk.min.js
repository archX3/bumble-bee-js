/*
 !*/
(function(b){var a=null,m=!1,n=!0,r=document.querySelectorAll("#osk .key");document.querySelectorAll("#osk .shiftKey");var t=document.querySelector("#capsLock"),k=!1,d=!1,h=new Bee.Event.EventManager,p=document.getElementsByTagName("INPUT");p&&h.bindOnAll(p,"mousedown",function(b){a=b.target;n="number,*"!==a.getAttribute("data-type");a=a?a:document.body;m="textarea"===a.tagName.toLowerCase()||"input"===a.tagName.toLowerCase()&&"text"===a.type});var q=document.getElementsByTagName("TEXTAREA");q&&h.bindOnAll(q,
"mousedown",function(b){a=b.target;n="number,*"!==a.getAttribute("data-type");a=a?a:document.body;m="textarea"===a.tagName.toLowerCase()||"input"===a.tagName.toLowerCase()&&"text"===a.type});h.bindOnAll(r,"mouseup",function(e){if(void 0===p[0]&&void 0===q[0]||null===a)e.preventDefault();else{var f="textarea"===a.tagName.toLowerCase()?a.innerHTML:a.value;var l=this.getAttribute("data-normalKey"),h=this.getAttribute("data-shiftKey"),g=this.id,c=b.getCaretPosition(a);if((0===e.button||1===e.which)&&
m&&!this.classList.contains("disabled")&&!a.classList.contains("noKbd")&&!1===a.readOnly){if("capsLock"===g)return console.log("number,*"!==a.getAttribute("data-type")),b.changeBackgroundPosition(t,-368,-332),!k&&n?(k=!0,d&&(d=!1),!1):k=!1;if(-1<this.className.indexOf("shiftKey")){if(!d){if(k)return d=!1;d=!0;return!1}d=!1}else if("backSpace"===g)a.selectionEnd>a.selectionStart?(console.log("selected"),console.log(window.getSelection()),e=f.substring(0,a.selectionStart),f=f.substring(a.selectionEnd,
f.length),f=e+f,"textarea"===a.tagName.toLowerCase()?a.innerHTML=f:a.value=f):(b.deleteAtCaret(a),a.focus(),b.setCaretPosition(a,c-1));else if("spaceBar"===g)b.insertAtCaret(a," "),a.focus(),b.setCaretPosition(a,c+1);else if("tabKey"===g)a.focus(),b.insertAtCaret(a,"\t"),b.setCaretPosition(a,c+4);else if("enterKey"===g)a.focus(),b.insertAtCaret(a,"\r"),void 0!==window.showHint&&window.showHint(),b.setCaretPosition(a,c);else if("backKey"===g)b.setCaretPosition(a,c-1);else if("fwdKey"===g)b.setCaretPosition(a,
c+1);else if("upKey"===g)b.setCaretPosition(a,f.length);else if("downKey"===g)b.setCaretPosition(a,0);else{if(k){if(0>this.className.indexOf("noCaps"))return b.insertAtCaret(a,h),b.setCaretPosition(a,c+1),d=!1;if("number"===a.getAttribute("data-type")){if(this.parentElement.classList.contains("numRowKeys"))return b.insertAtCaret(a,l),b.setCaretPosition(a,c+1),!1;e.preventDefault()}b.insertAtCaret(a,l);b.setCaretPosition(a,c+1);return!1}if(d){if("number,*"!==a.getAttribute("data-type")||"number,*"===
a.getAttribute("data-type")&&"*"===h)b.insertAtCaret(a,h),b.setCaretPosition(a,c+1),d=!1;return!1}if("number"===a.getAttribute("data-type")||"number,*"===a.getAttribute("data-type"))if(k=d=!1,this.parentElement.classList.contains("numRowKeys")||this.classList.contains("metaKey")){if(null===a.getAttribute("data-maxLen")||a.value.toString().length<parseInt(a.getAttribute("data-maxLen"))&&null!==a.getAttribute("data-maxLen"))return b.insertAtCaret(a,l),b.setCaretPosition(a,c+1),null!==a.getAttribute("data-max")&&
""!==a.getAttribute("data-max")&&(parseFloat(a.value)>parseFloat(a.getAttribute("data-max"))?(a.value="",a.style.border="1px solid #ff0000"):a.style.borderColor=""),null!==a.getAttribute("data-min")&&""!=a.getAttribute("data-min")&&(parseFloat(a.value)<parseFloat(a.getAttribute("data-min"))?(a.value="",a.style.border="1px solid #ff0000"):a.style.borderColor=""),!1}else e.preventDefault();else if("alpha"===a.getAttribute("data-type")){if(this.parentElement.classList.contains("alphaRowKeys")||this.classList.contains("metaKey"))return null!==
a.getAttribute("data-maxLen")&&"number"===parseInt(a.getAttribute("data-maxLen"))&&(a.value.toString().length<parseInt(a.getAttribute("data-maxLen"))?(b.insertAtCaret(a,l),b.setCaretPosition(a,c+1)):e.preventDefault()),b.insertAtCaret(a,l),b.setCaretPosition(a,c+1),!1;e.preventDefault()}else null===a.getAttribute("data-maxLen")||a.value.toString().length<parseInt(a.getAttribute("data-maxLen"))&&null!==a.getAttribute("data-maxLen")?(b.insertAtCaret(a,l),b.setCaretPosition(a,c+1)):e.preventDefault()}}}})})(Bee.utils);
