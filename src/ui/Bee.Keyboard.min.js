var Barge=Bee||{};
(function(d,e){"function"===typeof define&&define.amd?define([],function(){return d["Barge.Keyboard"]=e(d)}):"object"===typeof exports?module.exports=e(d):d["Barge.Keyboard"]=e(d)})(window,function(d){var e=Bee.Utils,m=Bee.String;Bee.Keyboard=Bee.Keyboard||{};Bee.Keyboard.KeyNames={8:"backspace",9:"tab",13:"enter",16:"shift",17:"ctrl",18:"alt",19:"pause",20:"caps-lock",27:"esc",32:"space",33:"pg-up",34:"pg-down",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"insert",46:"delete",48:"0",
49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",59:"semicolon",61:"equals",65:"a",66:"b",67:"c",68:"d",69:"e",70:"f",71:"g",72:"h",73:"i",74:"j",75:"k",76:"l",77:"m",78:"n",79:"o",80:"p",81:"q",82:"r",83:"s",84:"t",85:"u",86:"v",87:"w",88:"x",89:"y",90:"z",93:"context",96:"num-0",97:"num-1",98:"num-2",99:"num-3",100:"num-4",101:"num-5",102:"num-6",103:"num-7",104:"num-8",105:"num-9",106:"num-multiply",107:"num-plus",109:"num-minus",110:"num-period",111:"num-division",112:"f1",113:"f2",
114:"f3",115:"f4",116:"f5",117:"f6",118:"f7",119:"f8",120:"f9",121:"f10",122:"f11",123:"f12",186:"semicolon",187:"equals",189:"dash",188:",",190:".",191:"/",192:"`",219:"open-square-bracket",220:"\\",221:"close-square-bracket",222:"single-quote",224:"win"};Bee.Keyboard={kc:Bee.Keyboard.KeyCodes,checkKey:function(a){return(d.event?d.event:a).keyCode},insertKeyBoardValue:function(a,f){e.setCaretPosition(a,f);a.focus()},isTextModifyingKeyEvent:function(a){if(a.altKey&&!a.ctrlKey||a.metaKey||a.keyCode>=
Bee.Keyboard.KeyCodes.F1&&a.keyCode<=Bee.Keyboard.KeyCodes.F12)return!1;switch(a.keyCode){case Bee.Keyboard.KeyCodes.ALT:case Bee.Keyboard.KeyCodes.CAPS_LOCK:case Bee.Keyboard.KeyCodes.CONTEXT_MENU:case Bee.Keyboard.KeyCodes.CTRL:case Bee.Keyboard.KeyCodes.DOWN:case Bee.Keyboard.KeyCodes.END:case Bee.Keyboard.KeyCodes.ESC:case Bee.Keyboard.KeyCodes.HOME:case Bee.Keyboard.KeyCodes.INSERT:case Bee.Keyboard.KeyCodes.LEFT:case Bee.Keyboard.KeyCodes.MAC_FF_META:case Bee.Keyboard.KeyCodes.META:case Bee.Keyboard.KeyCodes.NUMLOCK:case Bee.Keyboard.KeyCodes.NUM_CENTER:case Bee.Keyboard.KeyCodes.PAGE_DOWN:case Bee.Keyboard.KeyCodes.PAGE_UP:case Bee.Keyboard.KeyCodes.PAUSE:case Bee.Keyboard.KeyCodes.PHANTOM:case Bee.Keyboard.KeyCodes.PRINT_SCREEN:case Bee.Keyboard.KeyCodes.RIGHT:case Bee.Keyboard.KeyCodes.SCROLL_LOCK:case Bee.Keyboard.KeyCodes.SHIFT:case Bee.Keyboard.KeyCodes.UP:case Bee.Keyboard.KeyCodes.VK_NONAME:case Bee.Keyboard.KeyCodes.WIN_KEY:case Bee.Keyboard.KeyCodes.WIN_KEY_RIGHT:return!1;
case Bee.Keyboard.KeyCodes.WIN_KEY_FF_LINUX:return!Bee.userAgent.GECKO;default:return a.keyCode<Bee.Keyboard.KeyCodes.FIRST_MEDIA_KEY||a.keyCode>Bee.Keyboard.KeyCodes.LAST_MEDIA_KEY}},isBackSpaceKey:function(a){return a.keyCode===Bee.Keyboard.KeyCodes.BACKSPACE},isModifierKey:function(a){return a.shiftKey||a.ctrlKey||a.altKey},isAlphaKey:function(a){return 65<=a.keyCode&&90>=a.keyCode},isNumericKey:function(a){return 48<=a.keyCode&&57>=a.keyCode},isArrowKey:function(a){return 37<=a.keyCode&&40>=a.keyCode},
isLeftArrowKey:function(a){return a.keyCode===Bee.Keyboard.KeyCodes.LEFT},isRightArrowKey:function(a){return a.keyCode===Bee.Keyboard.KeyCodes.RIGHT},isLeftOrRightArrowKey:function(a){return a.keyCode===Bee.Keyboard.KeyCodes.RIGHT||a.keyCode===Bee.Keyboard.KeyCodes.LEFT},isUpKey:function(a){return a.keyCode===Bee.Keyboard.KeyCodes.UP},isDownKey:function(a){return a.keyCode===Bee.Keyboard.KeyCodes.DOWN},isUpOrDownKey:function(a){return a.keyCode===Bee.Keyboard.KeyCodes.UP||a.keyCode===Bee.Keyboard.KeyCodes.DOWN},
isCharacterKey:function(a){if(a>=Bee.Keyboard.KeyCodes.ZERO&&a<=Bee.Keyboard.KeyCodes.NINE||a>=Bee.Keyboard.KeyCodes.NUM_ZERO&&a<=Bee.Keyboard.KeyCodes.NUM_MULTIPLY||a>=Bee.Keyboard.KeyCodes.A&&a<=Bee.Keyboard.KeyCodes.Z||(Bee.userAgent.WEBKIT||Bee.userAgent.EDGE)&&0===a)return!0;switch(a){case Bee.Keyboard.KeyCodes.SPACE:case Bee.Keyboard.KeyCodes.PLUS_SIGN:case Bee.Keyboard.KeyCodes.QUESTION_MARK:case Bee.Keyboard.KeyCodes.AT_SIGN:case Bee.Keyboard.KeyCodes.NUM_PLUS:case Bee.Keyboard.KeyCodes.NUM_MINUS:case Bee.Keyboard.KeyCodes.NUM_DOT:case Bee.Keyboard.KeyCodes.NUM_DIVISION:case Bee.Keyboard.KeyCodes.SEMICOLON:case Bee.Keyboard.KeyCodes.FF_SEMICOLON:case Bee.Keyboard.KeyCodes.DASH:case Bee.Keyboard.KeyCodes.EQUALS:case Bee.Keyboard.KeyCodes.FF_EQUALS:case Bee.Keyboard.KeyCodes.COMMA:case Bee.Keyboard.KeyCodes.DOT:case Bee.Keyboard.KeyCodes.SLASH:case Bee.Keyboard.KeyCodes.APOSTROPHE:case Bee.Keyboard.KeyCodes.SINGLE_QUOTE:case Bee.Keyboard.KeyCodes.OPEN_SQUARE_BRACKET:case Bee.Keyboard.KeyCodes.BACKSLASH:case Bee.Keyboard.KeyCodes.CLOSE_SQUARE_BRACKET:return!0;
default:return!1}},firesKeyPressEvent:function(a,f,d,e,c){if(!(Bee.userAgent.IE||Bee.userAgent.EDGE||Bee.userAgent.WEBKIT&&Bee.userAgent.isVersionOrHigher("525")))return!0;if(Bee.userAgent.MAC&&c)return Bee.Keyboard.isCharacterKey(a);if(c&&!e)return!1;Bee.Utils.isNumber(f)&&(f=Bee.Keyboard.normalizeKeyCode(f));if(!d&&(f===Bee.Keyboard.KeyCodes.CTRL||f===Bee.Keyboard.ALT||Bee.userAgent.MAC&&f===Bee.Keyboard.KeyCodes.META))return!1;if((Bee.userAgent.WEBKIT||Bee.userAgent.EDGE)&&e&&d)switch(a){case Bee.Keyboard.KeyCodes.BACKSLASH:case Bee.Keyboard.KeyCodes.OPEN_SQUARE_BRACKET:case Bee.Keyboard.KeyCodes.CLOSE_SQUARE_BRACKET:case Bee.Keyboard.KeyCodes.TILDE:case Bee.Keyboard.KeyCodes.SEMICOLON:case Bee.Keyboard.KeyCodes.DASH:case Bee.Keyboard.KeyCodes.EQUALS:case Bee.Keyboard.KeyCodes.COMMA:case Bee.Keyboard.KeyCodes.DOT:case Bee.Keyboard.KeyCodes.SLASH:case Bee.Keyboard.KeyCodes.APOSTROPHE:case Bee.Keyboard.KeyCodes.SINGLE_QUOTE:return!1}if(Bee.userAgent.IE&&
e&&f===a)return!1;switch(a){case Bee.Keyboard.KeyCodes.ENTER:return!0;case Bee.Keyboard.KeyCodes.ESC:return!(Bee.userAgent.WEBKIT||Bee.userAgent.EDGE)}return Bee.Keyboard.isCharacterKey(a)},normalizeKeyCode:function(a){return Bee.userAgent.GECKO?Bee.Keyboard.normalizeGeckoKeyCode(a):Bee.userAgent.MAC&&Bee.userAgent.WEBKIT?Bee.Keyboard.normalizeMacWebKitKeyCode(a):a},normalizeMacWebKitKeyCode:function(a){switch(a){case Bee.Keyboard.KeyCodes.MAC_WK_CMD_RIGHT:return Bee.Keyboard.KeyCodes.META;default:return a}},
normalizeGeckoKeyCode:function(a){switch(a){case Bee.Keyboard.KeyCodes.FF_EQUALS:return Bee.Keyboard.KeyCodes.EQUALS;case Bee.Keyboard.KeyCodes.FF_SEMICOLON:return Bee.Keyboard.KeyCodes.SEMICOLON;case Bee.Keyboard.KeyCodes.FF_DASH:return Bee.Keyboard.KeyCodes.DASH;case Bee.Keyboard.KeyCodes.MAC_FF_META:return Bee.Keyboard.KeyCodes.META;case Bee.Keyboard.KeyCodes.WIN_KEY_FF_LINUX:return Bee.Keyboard.KeyCodes.WIN_KEY;default:return a}}};Bee.Keyboard.shortcut=function(){for(var a=e.getElementsByAttribute("data-shortcut"),
f=a.some(function(a){return"ctrl,s"===a.getAttribute("data-shortcut").toString()}),k=0;k<a.length;k++)(function(k){d.addEventListener("keydown",function(c){function g(){b.preventDefault();a[k].click()}var b=c?c:d.event;c=a[k].getAttribute("data-shortcut");c=m.isEmpty(c)?"":c.split(",");var h=String.fromCharCode(b.keyCode).toLowerCase();e.defined(c[1]);e.defined(c[2]);f||!b.ctrlKey||"s"!=h||b.shiftKey||b.altKey||b.preventDefault();var l=c.length;1===l?(b.shiftKey||b.ctrlKey||b.altKey||c[0]===h&&g(),
b.shiftKey||b.ctrlKey||b.altKey||27!==b.keyCode?b.shiftKey||b.ctrlKey||b.altKey||13!==b.keyCode||"return"!==c[0]&&"enter"!==c[0]||g():"esc"!==c[0]&&"escape"!==c[0]||g()):2===l&&("ctrl"===c[0]?!b.ctrlKey||c[1]!==h||b.shiftKey||b.altKey||g():"shift"===c[0]?b.shiftKey&&c[1]===h&&!b.ctrlKey&&b.altKey&&g():"alt"===c[0]&&(!b.altKey||c[1]!==h||b.ctrlKey||b.shiftKey||g()));3===l&&(-1<c.indexOf("ctrl")&&-1<c.indexOf("alt")?b.ctrlKey&&b.altKey&&!b.shiftKey&&c[2]===h&&g():-1<c.indexOf("ctrl")&&-1<c.indexOf("shift")?
b.ctrlKey&&b.shiftKey&&!b.altKey&&c[2]===h&&g():-1<c.indexOf("shift")&&-1<c.indexOf("alt")&&b.shiftKey&&b.altKey&&!b.ctrlKey&&c[2]===h&&g());4===l&&-1<c.indexOf("ctrl")&&-1<c.indexOf("shift")&&-1<c.indexOf("alt")&&b.ctrlKey&&b.altKey&&b.shiftKey&&c[3]===h&&g()})})(k)};void 0!==Bee.Utils.getElementsByAttribute("data-shortcut",!0)&&new Bee.Keyboard.shortcut;return Bee.Keyboard});Bee.Utils.provide("Barge.Keyboard.KeyCodes");
Bee.Keyboard.KeyCodes={WIN_KEY_FF_LINUX:0,MAC_ENTER:3,BACKSPACE:8,TAB:9,NUM_CENTER:12,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PLUS_SIGN:43,PRINT_SCREEN:44,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,FF_SEMICOLON:59,FF_EQUALS:61,FF_DASH:173,QUESTION_MARK:63,AT_SIGN:64,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,
Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,META:91,WIN_KEY_RIGHT:92,CONTEXT_MENU:93,NUM_ZERO:96,NUM_ONE:97,NUM_TWO:98,NUM_THREE:99,NUM_FOUR:100,NUM_FIVE:101,NUM_SIX:102,NUM_SEVEN:103,NUM_EIGHT:104,NUM_NINE:105,NUM_MULTIPLY:106,NUM_PLUS:107,NUM_MINUS:109,NUM_DOT:110,NUM_DIVISION:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,NUMLOCK:144,SCROLL_LOCK:145,FIRST_MEDIA_KEY:166,LAST_MEDIA_KEY:183,SEMICOLON:186,DASH:189,EQUALS:187,COMMA:188,DOT:190,SLASH:191,
APOSTROPHE:192,TILDE:192,SINGLE_QUOTE:222,OPEN_SQUARE_BRACKET:219,BACKSLASH:220,CLOSE_SQUARE_BRACKET:221,WIN_KEY:224,MAC_FF_META:224,MAC_WK_CMD_LEFT:91,MAC_WK_CMD_RIGHT:93,WIN_IME:229,VK_NONAME:252,PHANTOM:255};
