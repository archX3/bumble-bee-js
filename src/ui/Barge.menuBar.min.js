(function(c,h,f){Barge.Dom=Barge.Dom||{};Barge.Dom.MenuBar=function(a){this.options={menuItemsClassName:"menuItem",submenuDirection:"right",recurse:!1,menuItems:null};a&&(this.options=c.extend(this.options,a));this.Be=new Barge.Event.EventManager;this.menuItems=c.nodeListToArray(document.getElementsByClassName(this.options.menuItemsClassName));this.allItems=[];this.itemsWithSubMenu=[];this.len=this.menuItems.length;this.i=0;this.gSubSubMenuItems=this.gsubMenuItems=null;this.aSubMenuIsOpen=!1;this.openSubSubMenu=
this.openSubMenu=null;this.openSubMenus=[];this.aSubMenuGrandChildMenuIsOpen=this.aSubMenuChildMenuIsOpen=!1;this.lowerRight=this.lowerLeft=this.upperRight=this.upperLeft=null;this.activeRow=c.defined(this.openSubMenu)?this.openSubMenu:null;this.mouseLocs=[];this.loc=this.mouseLocs[this.mouseLocs.length-1];this.prevLoc=this.mouseLocs[0];this.MOUSE_LOCS_TRACKED=3;this.menuBarActivated=!1;this.aSubMenuIsOpen=this.menuItems.some(this._hasSubMenuOpen)};Barge.Dom.MenuBar.prototype._openWin=function(a){0===
this._getDisplayState(a)&&c.setDisplayState(a,"block")};Barge.Dom.MenuBar.prototype._getSlope=function(a,b){return((b.y?b.y:b.top?b.top:0)-(a.y?a.y:a.top?a.top:0))/((b.x?b.x:b.right?b.right:0)-(a.x?a.x:a.right?a.right:0))};Barge.Dom.MenuBar.prototype._disabled=function(a){return a.classList.contains("disabled")};Barge.Dom.MenuBar.prototype._noHover=function(a){return a.classList.contains("noHov")};Barge.Dom.MenuBar.prototype._getDisplayState=function(a){return"none"===a.style.display||""===a.style.display?
0:1};Barge.Dom.MenuBar.prototype._hasSubMenuOpen=function(a){return(a=a.children[1])&&"UL"===a.tagName&&"block"===a.style.display};Barge.Dom.MenuBar.prototype._closeAllSubMenus=function(a,b,d){if(a)for(var e=0,f=a.length;e<f;e++){var g=a[e].children[1],k=a[e].children[1]&&"UL"===g.tagName;g&&1===this._getDisplayState(g)&&(k&&c.closeWin(g),b&&c.css(a[e].children[0],{backgroundColor:""}));d&&c.css(a[e],{backgroundColor:""})}};Barge.Dom.MenuBar.prototype._closeOpenSubMenus=function(a){c.defined(this.openSubMenu)&&
(c.css(this.openSubMenu,{display:"none"}),c.css(a.children[0],{backgroundColor:""}));c.defined(this.openSubSubMenu)&&c.css(this.openSubSubMenu,{display:"none"})};Barge.Dom.MenuBar.prototype.addClickEvent=function(){var a=this;this.Be.bindOnAll(a.menuItems,"click",function(b){var d=this.children[1],e=this.children[0];b=b.target;this.children[1]&&"UL"===d.tagName?1===a._getDisplayState(d)?(c.closeWin(d),c.css(e,{backgroundColor:""}),a.aSubMenuIsOpen=!1,a._closeAllSubMenus(a.allItems,!1,!0),a.aSubMenuChildMenuIsOpen=
!1):(!1===a.menuBarActivated&&a._closeAllSubMenus(a.menuItems,!0),!0===a.aSubMenuIsOpen&&a._closeAllSubMenus(a.menuItems,!0),!1===a.menuBarActivated&&(a.menuBarActivated=!0),!1===a._noHover(this)&&c.css(e,{backgroundColor:"var(--menuItemHoverColor)"}),a._openWin(d),c.css(d,{display:"block"}),a.openSubMenu=d,a.aSubMenuIsOpen=!0):(a._noHover(this)||c.css(e,{backgroundColor:"var(--menuItemHoverColor)"}),a.aSubMenuIsOpen=!0);if(b.nextElementSibling!==d||b.parentNode!==this)c.closeWin(d),c.css(e,{backgroundColor:""}),
a.aSubMenuIsOpen=!1})};Barge.Dom.MenuBar.prototype._collectAllMenuItems=function(a){var b=this;h.forEach(a,function(a,c){(c=a.children[1])&&"UL"===c.tagName?(0>b.menuItems.indexOf(a)&&!a.classList.contains("hDivider")&&b.allItems.push(a),b._collectAllMenuItems(c.children)):!a.classList.contains("hDivider")&&0>b.menuItems.indexOf(a)&&b.allItems.push(a)})};Barge.Dom.MenuBar.prototype.getAllMenuItems=function(){return this.allItems};Barge.Dom.MenuBar.prototype.addMouseOverEvent=function(){var a=this,
b=null,d=null;h.forEach(this.menuItems,function(b,d){b.addEventListener("mouseover",function(b){if(!0===a.aSubMenuIsOpen&&!this.classList.contains("dropDown")&&this===b.target.parentElement){b=0;for(var e=a.allItems.length;b<e;b++){var d=a.allItems[b].children[1];d&&1===a._getDisplayState(d)&&d&&"UL"===d.tagName&&c.closeWin(d);c.css(a.allItems[b],{backgroundColor:""})}}})});this.Be.bindOnAll(this.menuItems,"mouseover",function(e){!0!==a.aSubMenuIsOpen||this.classList.contains("dropDown")||(b=this.children[1],
d=this.children[0],b&&"UL"===b.tagName?(f.css(a.openSubMenu.parentElement.children[0],{backgroundColor:""}),f.closeWin(a.openSubMenu),a.aSubMenuIsOpen=!1,a._openWin(b),a.aSubMenuIsOpen=!0,a.openSubMenu=b,subMenuItems=b.children,a.gsubMenuItems=subMenuItems):(f.css(a.openSubMenu.parentElement.children[0],{backgroundColor:""}),f.closeWin(a.openSubMenu)),a._noHover(this)||c.css(d,{backgroundColor:"var(--menuItemHoverColor)"}))},!0);this.Be.bindOnAll(this.allItems,"mouseover",function(b){b=this.children[1];
this.children[1]&&"UL"===b.tagName?(c.defined(a.openSubSubMenu)&&(f.css(a.openSubSubMenu.parentElement,{backgroundColor:""}),f.closeWin(a.openSubSubMenu)),a._openWin(b),a.aSubMenuChildMenuIsOpen=!0,a.openSubSubMenu=b):!0===a.aSubMenuChildMenuIsOpen&&(f.css(a.openSubSubMenu.parentElement,{backgroundColor:""}),f.closeWin(a.openSubSubMenu),a.aSubMenuChildMenuIsOpen=!1);c.css(this,{backgroundColor:"var(--menuItemHoverColor)"})})};Barge.Dom.MenuBar.prototype.addMouseOutEvent=function(){var a=this;this.Be.bindOnAll(a.menuItems,
"mouseout",function(){!0===a.aSubMenuIsOpen&&c.defined(a.openSubMenu)&&a.openSubMenu.parentElement!==this&&c.css(this.children[0],{backgroundColor:""})});this.Be.bindOnAll(this.allItems,"mouseout",function(a){this.children[1]&&"UL"===this.children[1].tagName?!0===this.aSubMenuChildMenuIsOpen&&c.defined(this.openSubSubMenu)&&this.openSubSubMenu.parentElement!==this&&c.css(a.target,{backgroundColor:""}):f.css(this,{backgroundColor:""})},!1)};Barge.Dom.MenuBar.prototype.addCloseOutEvent=function(){var a=
this;window.addEventListener("click",function(b){function c(){a._closeAllSubMenus(a.menuItems,!0);a._closeAllSubMenus(a.allItems,!1,!0);a.aSubMenuIsOpen=!1}var e="body"===b.target.tagName.toLocaleLowerCase()||"html"===b.target.tagName.toLocaleLowerCase();a.aSubMenuIsOpen&&(b.target.parentNode.classList&&!b.target.parentNode.classList.contains("menuItem")?c():e&&c())})};Barge.Dom.MenuBar.prototype.create=function(){this._collectAllMenuItems(this.menuItems);this.addClickEvent();this.addMouseOverEvent();
this.addMouseOutEvent();this.addCloseOutEvent()};return MenuBar=Barge.Dom.MenuBar})(Barge.utils,Barge.Array,Barge.Dom);var menubar=new Barge.Dom.MenuBar;menubar.create();
