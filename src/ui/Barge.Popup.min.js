var Barge=Barge||{};
(function(g,f){function h(){var a=document.createElement("section");a.style.display="block";a.id="popUpOverlay";a.className="overlay";a.onmousedown=function(){Barge.utils.closeWin(this,!0,!1);Barge.utils.closeWin(Barge.utils.gebi("popImageDiv"),!1,!1)};return a}var k=new Barge.Event.EventManager;document.head.getAttribute("data-theme");Barge.Bursty=Barge.Bursty||{};Barge.Bursty.popup=function(){for(var a=Barge.utils.getElementsByAttribute("data-popup"),b=0;b<a.length;b++)console.log(a[b]),a[b].addEventListener("click",
function(a){var b=Barge.utils.qs(this.getAttribute("data-popupItem"));console.log(this.offsetLeft);Barge.utils.toggleDisplay(b);b.style.position="absolute";Barge.utils.setObjectPositionAt(b,this,"bottomLeft");b.addEventListener("click",function(a){a.stopPropagation();console.log(a.target);a.target!==b&&(console.log(a.target),Barge.utils.closeWin(b,!1,!1))})})};Barge.Bursty.BulgeImage=function(a,b){var c=document.createElement("div");c.id="popupImageDiv";Barge.utils.addClass(c,"zoomIn");c.style.display=
"none";var d=document.createElement("img");d.setAttribute("width","200");d.id="popupImageDivImg";a&&"dark"==a?Barge.utils.insertDynamicCss("#popupImageDiv {margin: 0; width: auto;  height:auto; padding: 10px; border: 1px solid #353434; position: absolute;background-color: #6b6b6b;z-index: 30; box-shadow: 0 0 4px rgba(0, 0, 0, .5);border-radius: 3px;}\r\n   #popupImageDivImg{border:0; border: 1px solid #353434;}","popupImageCssDark"):Barge.utils.insertDynamicCss("#popupImageDiv {margin: 0; width: auto;  height:auto; padding: 10px; border: 1px solid #ccc; position: absolute;background-color: #fff;z-index: 30; box-shadow: 0 0 4px rgba(0, 0, 0, .5);border-radius: 3px;}\r\n   #popupImageDivImg{border:0; border: 1px solid #ccc;}",
"popupImageCss");b?b.appendChild(c):document.body.appendChild(c);a=Barge.utils.getElementsByAttribute("data-popupImage");for(var e=0;e<a.length;e++)a[e].addEventListener("mouseenter",function(a){a.stopPropagation();Barge.utils.setObjectPositionAt(c,!1,!1,a);if(""!==this.getAttribute("src")&&"true"===this.complete.toString()||"defaultImg.png"!==this.getAttribute("src"))d.setAttribute("src",this.getAttribute("src")),d.setAttribute("alt","N/A"),!0===d.complete&&0>d.getAttribute("src").indexOf("defaultImage")&&
0>d.getAttribute("src").indexOf("defaultAvatar")&&(c.appendChild(d),Barge.utils.openWin(c),Barge.utils.dynamicSpaceElPositioner(c,b))},!0),a[e].addEventListener("mouseout",function(){Barge.utils.closeWin(c,!1,!1)})};Barge.Bursty.PopImage=function(a){var b=document.createElement("div");b.id="popImageDiv";Barge.utils.addClass(b,"zoomIn");b.style.display="none";var c=document.createElement("img");c.setAttribute("width","500");c.id="popImageDivImg";a&&"dark"==a?Barge.utils.insertDynamicCss("section{width: 100%;height: 100%;overflow: hidden;}\r\n   .overlay{z-index: 170;position: absolute;top:0;background-color: #000;opacity: .7;display: none;} #popImageDiv {margin: 0; width: auto;  height:auto; padding: 10px; border: 1px solid #353434; position: absolute;background-color: #6b6b6b;z-index: 171; box-shadow: 0 0 4px rgba(0, 0, 0, .5);}\r\n   #popImageDivImg{border:0; border: 1px solid #353434;}\r\n   #popImageDldBtn{top:unset; bottom: 15px; right: 10px; opacity: .4; position:absolute} #popImageDldBtn:hover{opacity:1}",
"popImageCssDark"):Barge.utils.insertDynamicCss("section{ width: 100%; height: 100%; overflow: hidden;}.overlay{z-index: 170; position: absolute; top:0;  background-color: #fff;  opacity: .8; display: none;}\r\n                            #popImageDiv {margin: 0; width: auto;  height:auto; padding: 10px; border: 1px solid #ccc; position: absolute;background-color: #fff;z-index: 171; box-shadow: 0 0 4px rgba(0, 0, 0, .5);}\r\n                     #popImageDivImg{border:0; border: 1px solid #ccc;}\r\n                     #popImageDldBtn{top:unset; bottom: 15px; right: 10px; opacity: .4; position:absolute} #popImageDldBtn:hover{opacity:1}",
"popImageCss");document.body.appendChild(b);a=Barge.utils.getElementsByAttribute("data-popupImage");for(var d=0;d<a.length;d++)a[d].addEventListener("click",function(a){a.stopPropagation();if(""!=this.getAttribute("src")&&"true"==this.complete.toString()||"defaultImg.png"!=this.getAttribute("src"))c.setAttribute("src",this.getAttribute("src")),c.setAttribute("alt","N/A"),1==c.complete&&0>c.getAttribute("src").indexOf("defaultImage")&&0>c.getAttribute("src").indexOf("defaultAvatar")&&(document.body.appendChild(h()),
b.appendChild(c),Barge.utils.openWin(b),b.style.left=document.body.offsetWidth/2-b.offsetWidth/2+"px",b.style.top=document.body.offsetHeight/2-b.offsetHeight/2+"px")},!0)};Barge.Image=Barge.Image||{};Barge.Image.insertGenericAvatar=function(a,b){for(var c=function(c){var d=new Image;d.onerror=function(){c.classList.contains("avatar")?c.src=b:c.src=a};d.src=c.src},d=document.getElementsByTagName("IMG"),e=d.length;-1!==--e;)c(d[e])};Barge.Image.preview=new function(){this.apply=function(a,b){var c=
/^([a-zA-Z0-9\s_\\.\-:])+(.png|.jpg|.jpeg|.tiff|.gif|.ico|.svg)$/;if(a&&b){"string"===typeof a&&(a=g.gebi(a));"string"===typeof b&&(a=g.gebi(b));var d=window.URL||window.webkitURL;d?a.onchange=function(){var e=this.files;e&&e.length?(e=e[0],/^image\/\w+/.test(e.type),c.test(a.value.toLowerCase())?(g.defined(e.type)&&console.log(e.type),b.style.backgroundImage="url("+d.createObjectURL(e)+")"):Barge.DiceyDialog.confirm({t:"Selected file type not supported",m:"Please choose an image file.",i:"f"})):
Barge.DiceyDialog.confirm({t:"Selected file type not supported",m:"Please choose an image file.",i:"f"})}:Barge.DiceyDialog.confirm({t:"...well this is embarrassing",m:"Your image has been loaded but previewing is not supported by your browser.",i:"w"})}else throw Error("Missing params imgInputEl and/or imgPreviewEl");}};Barge.Bursty.window=function(){if(void 0!==g.getElementsByAttribute("data-window")[0]){for(var a=g.nodeListToArray(g.getElementsByAttribute("data-window")),b=0,c=a.length;b<c;b++)a[b].addEventListener("click",
function(){var a=this.getAttribute("data-window").split("|"),b=g.pInt(a[2].split("=")[1]);b=window.screen?"left="+(screen.availWidth/2-b/2):"left=200";window.toolBoxFlyOutIsOpen||window.open(a[0],a[1],a[2]+", "+a[3]+", "+b+", "+a[4]).focus()});a=b=c=null}};Barge.Bursty.DropDown=function(){var a=f.getElementsByAttribute("data-dropdown");a&&k.bindOnAll(a,"click",function(a){a=this.getAttribute("data-dropdown").split(",");var b=f.getEl("#"+a[0]);0===f.getDisplayState(b)?(f.anchorBottomLeft(this,b,a[1],
a[2]),this.classList.contains("dropup")&&(f.anchorTop(this,b,a[1]),f.alignLeft(this,b,a[2])),f.openWin(b),f.pushIntoView(b)):f.closeWin(b)})};new Barge.Bursty.DropDown})(Barge.utils,Barge.Dom);
