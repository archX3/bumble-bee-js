(function(e,f){"function"===typeof define&&define.amd?define([],function(){return e.PropertyBar=f(e)}):"object"===typeof exports?module.exports=f(e):e.PropertyBar=f(e)})(window,function(e){function f(b){this.thumbGrip=this.expandBtn=null;this.options={expandable:!1,unDockable:!0}}var d=Bee.Utils,c=Bee.Widget;f.prototype.createThumb=function(){this.thumbGrip=d.createEl("div",{className:"hDockThumb"});!0===this.options.expandable&&(this.expandBtn=d.createEl("div",{className:"expandBtn fa fa-angle-double-right"},
{position:"relative",float:"right",height:"100%",width:"10px",fontSize:"8px",textAlign:"right",lineHeight:"6px",fontWeight:"600"}),this.dynamicStyleSheet.innerHTML+=".expandBtn:hover{ color:#fff;}",this.thumbGrip.appendChild(this.expandBtn));c.insertChildAt(this.toolBox,this.thumbGrip,0)};f.prototype.makeUnDockable=function(){var b=this;c.css(b.toolBox,{width:b.toolBox.offsetWidth,height:b.toolBox.offsetHeight,border:"1px solid var(--dividerColor)",borderTop:"none"});new function(f,h){function m(g){if(h.tolerance){c.css(f,
{cursor:"move"});var e=d.getStyleValue("left",a.toBeMoved);10<=e&&e<=b.toBeMovedWidth&&!b.docked?c.openWin(k):c.closeWin(k);b.docked?(e=g.clientY-mouseDownY,g.clientX-mouseDownX>h.tolerance&&(c.css(toolBox,{left:originalLeft+g.clientX-mouseDownX+"px"}),b.docked=!1),10<e&&(c.css(toolBox,{top:originalTop+g.clientY-mouseDownY+"px"}),b.docked=!1)):e<=h.tolerance+5?(d.css(a.toBeMoved,{left:n.left+"px"}),c.closeWin(k),b.docked=!0):a.toBeMoved.style.left=originalLeft+g.clientX-mouseDownX+"px"}else a.toBeMoved.style.left=
originalLeft+g.clientX-mouseDownX+"px";31>g.clientY?a.toBeMoved.style.top="31px":31<=g.clientY&&!b.docked&&(a.toBeMoved.style.top=originalTop+g.clientY-mouseDownY+"px")}function p(g){c.css(f,{cursor:"default"});b.toolTipProps.leftOffset=d.pInt(gsv("left",a.toBeMoved));b.toolTipProps.topOffset=d.pInt(gsv("top",a.toBeMoved));q=1===c.getDisplayState(k);(0>=b.toolTipProps.leftOffset||q)&&b.dock();b.docked?(d.css(a.toBeMoved,{width:b.toBeMovedWidth+"px",height:b.toBeMovedHeight+(l?40:0)+"px",top:n.top-
(l&&"none"===r.style.display?40:0)+"px",borderTop:"none",boxShadow:"none"}),rootStyle.setProperty("--toolBoxWith",b.toolBox.style.width)):(d.css(a.toBeMoved,{position:"absolute",border:"1px solid var(--dividerColor)",boxShadow:"0px 0px 3px rgba(0, 0, 0, 0.6)"}),a.dragOptions.floatingWidth&&d.css(a.toBeMoved,{width:a.dragOptions.floatingWidth+10+"px"}),a.dragOptions.floatingHeight&&d.css(a.toBeMoved,{height:a.dragOptions.floatingHeight+7+"px"}),!0===b.options.keepState&&!0===b.options.keepPosition&&
localStorage.setItem("toolBoxDockState","false"),31>gsv("top",a.toBeMoved)&&(a.toBeMoved.style.top="31px"),d.defined(b.options.elOnRight)&&Bee.Widget.CSSSTYLE.setProperty("--toolBoxWith","0px"));if(!0===b.options.keepState&&!0===b.options.keepPosition&&!0===b.options.unDockable){g=c.getLeft(a.toBeMoved).toString();var e=c.getTop(a.toBeMoved).toString();localStorage.setItem("toolBoxXY",g+","+e)}document.removeEventListener("mousemove",m,!1);document.removeEventListener("mouseup",p,!1)}h=void 0===h?
{}:h;var a=this,l=d.defined(c.getEl("#propertyBar")),r=l?c.getEl("#propertyBar"):null;d.extend(h,h);a.moveParent=h.moveParent||null;a.toBeMoved=null;this.dragOptions=h;a.toBeMoved=a.moveParent?f.parentElement:f;b.toBeMovedWidth=a.toBeMoved.offsetWidth;b.toBeMovedHeight=a.toBeMoved.offsetHeight;c.addClass(a.toBeMoved,"draggable");c.css(a.toBeMoved,{position:"relative",left:a.toBeMoved.offsetLeft,top:a.toBeMoved.offsetTop,zIndex:a.toBeMoved.style.zIndex+20,transition:"all .07s"});var n={left:a.toBeMoved.offsetLeft,
top:a.toBeMoved.offsetTop},k=c.createEl("div");c.css(k,a.toBeMoved.style);d.extend(k,{id:"",innerHTML:""});c.css(k,{display:"none",position:"absolute",borderLeft:"2px solid #0078ff",borderTop:"none",borderRight:"none",borderBottom:"none",zIndex:a.toBeMoved.style.zIndex-1,backgroundColor:"rgba(8, 124, 255, 0.3)",top:c.getTop(a.toBeMoved)+"px"});document.body.appendChild(k);var q=!1;f.addEventListener("mousedown",function(d){c.css(k,{width:b.toBeMovedWidth+"px",height:b.toBeMovedHeight+"px"});d.stopPropagation();
parseInt(e.getComputedStyle(a.toBeMoved).left);parseInt(e.getComputedStyle(a.toBeMoved).top);d.target==f&&(document.addEventListener("mouseup",p,!1),document.addEventListener("mousemove",m,!1))},!1)}(b.thumbGrip,{prevDef:!1,moveParent:!0,tolerance:30,floatingHeight:b.list.offsetHeight+b.thumbGrip.offsetHeight})};f.prototype.create=function(){this.options.unDockable?this.createThumb():d.css(this.toolBox,{paddingTop:"5px"});this.addCloseOutEventOnBodyClick();!0===this.options.unDockable&&this.makeUnDockable()};
return Bee.Widget.Propertybar=f});
