(function(d,h,g,r){function l(a){d.defined(e)&&(d.openWin(e),a.style.left=m+"px",a.style.top=n+"px",d.dynamicSpaceElPositioner(e,!1),0>a.style.top&&d.css(a,{overflowY:"scroll"}))}var e=document.querySelector("#ctxMenu"),q=e.childNodes[0],a=null,f="",b=!1,k=!1,m=0,n=0;document.addEventListener("click",function(c){a=c.target;console.log(a);if(2==c.button||3==c.which)return d.getMouseCoordinates(c),l(e),a=a?a:document.body,(a.classList.contains("noCtxMenu")||a.classList.contains("key"))&&d.setDisplayState(e,
"none"),!1;if(0==c.button||1==c.which){var b=e;1==d.getDisplayState(e)&&(c.target==b&&c.target.parentNode==q&&"<li>"==c.target||d.closeWin(e,!1,!1));return!1}});document.addEventListener("contextmenu",function(c){var p=d.getMouseCoordinates(c);m=p.x;n=p.y;l(e);c.preventDefault();a=c.target;b=!("textarea"!=a.tagName.toLowerCase()&&("input"!=a.tagName.toLowerCase()||"text"!=a.type));!b||b&&""==Bee.CopyCat.getSelectedInputText(a)?document.getElementById("cutToCB").classList.add("disabledMenuItem"):document.getElementById("cutToCB").classList.remove("disabledMenuItem");
!b||b&&""==a.value?document.getElementById("clearText").classList.add("disabledMenuItem"):document.getElementById("clearText").classList.remove("disabledMenuItem");!b||b&&""==a.value?document.getElementById("selAllToCB").classList.add("disabledMenuItem"):document.getElementById("selAllToCB").classList.remove("disabledMenuItem");""!=f&&b?document.getElementById("pasteFromCB").classList.remove("disabledMenuItem"):document.getElementById("pasteFromCB").classList.add("disabledMenuItem");b&&""==Bee.CopyCat.getSelectedInputText(a)||
!b&&""==Bee.CopyCat.getSelectionText()?document.getElementById("copyToCB").classList.add("disabledMenuItem"):document.getElementById("copyToCB").classList.remove("disabledMenuItem");a=a?a:document.body;k=b&&("td"==a.tagName.toLowerCase()||"li"==a.tagName.toLowerCase());console.log(k);!a.classList.contains("noCtxMenu")&&!a.classList.contains("key")||k||d.setDisplayState(e,"none")});h=document.querySelectorAll(".menuIs:not(.divider)");for(g=0;g<h.length;g++)h[g].addEventListener("click",function(c){var b=
!("textarea"!=a.tagName.toLowerCase()&&("input"!=a.tagName.toLowerCase()||"text"!=a.type));this.classList.contains("disabledMenuItem")?c.preventDefault():"copyToCB"==this.id?b?a.selectionStart!=a.selectionEnd&&(f=Bee.CopyCat.getSelectedInputText(a),Bee.CopyCat.copySelectionText()):(f=Bee.CopyCat.getSelectionText(),Bee.CopyCat.copySelectionText()):"pasteFromCB"==this.id?b&&!a.readOnly&&(""!=f?d.insertAtCaret(a,f):"dark"==(""!=document.body.getAttribute("data-theme")?document.body.getAttribute("data-theme"):
"light")?Bee.Dialog.darkConfirm("Sorry","Pasting from System Clipboard is not allowed","OK",!1,!1,!1,"failure"):Bee.Dialog.lightConfirm("Sorry","Pasting from System Clipboard is not allowed","OK",!1,!1,!1,"failure")):"cutToCB"==this.id?b&&(f=Bee.CopyCat.getSelectedInputText(a),Bee.CopyCat.copySelectionText(),d.deleteSelectedText(a)):"selAllToCB"==this.id?b&&(a.select(),Bee.CopyCat.selectALl()):"clearText"==this.id&&b&&Bee.Input.clear(a)},!1)})(Bee.utils,Bee.Array,Bee.String,Bee.Dom);
