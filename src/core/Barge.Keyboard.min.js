var Barge=Barge||{};
(function(d,e){"function"===typeof define&&define.amd?define([],function(){return d["Barge.Keyboard"]=e(d)}):"object"===typeof exports?module.exports=e(d):d["Barge.Keyboard"]=e(d)})(window,function(d){var e=Barge.utils,m=Barge.String;Barge.Keyboard=Barge.Keyboard||{};Barge.Keyboard.KeyNames={8:"backspace",9:"tab",13:"enter",16:"shift",17:"ctrl",18:"alt",19:"pause",20:"caps-lock",27:"esc",32:"space",33:"pg-up",34:"pg-down",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"insert",46:"delete",
48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",59:"semicolon",61:"equals",65:"a",66:"b",67:"c",68:"d",69:"e",70:"f",71:"g",72:"h",73:"i",74:"j",75:"k",76:"l",77:"m",78:"n",79:"o",80:"p",81:"q",82:"r",83:"s",84:"t",85:"u",86:"v",87:"w",88:"x",89:"y",90:"z",93:"context",96:"num-0",97:"num-1",98:"num-2",99:"num-3",100:"num-4",101:"num-5",102:"num-6",103:"num-7",104:"num-8",105:"num-9",106:"num-multiply",107:"num-plus",109:"num-minus",110:"num-period",111:"num-division",112:"f1",
113:"f2",114:"f3",115:"f4",116:"f5",117:"f6",118:"f7",119:"f8",120:"f9",121:"f10",122:"f11",123:"f12",186:"semicolon",187:"equals",189:"dash",188:",",190:".",191:"/",192:"`",219:"open-square-bracket",220:"\\",221:"close-square-bracket",222:"single-quote",224:"win"};Barge.Keyboard={kc:Barge.Keyboard.KeyCodes,checkKey:function(a){return(d.event?d.event:a).keyCode},insertKeyBoardValue:function(a,f){e.setCaretPosition(a,f);a.focus()},isTextModifyingKeyEvent:function(a){if(a.altKey&&!a.ctrlKey||a.metaKey||
a.keyCode>=Barge.Keyboard.KeyCodes.F1&&a.keyCode<=Barge.Keyboard.KeyCodes.F12)return!1;switch(a.keyCode){case Barge.Keyboard.KeyCodes.ALT:case Barge.Keyboard.KeyCodes.CAPS_LOCK:case Barge.Keyboard.KeyCodes.CONTEXT_MENU:case Barge.Keyboard.KeyCodes.CTRL:case Barge.Keyboard.KeyCodes.DOWN:case Barge.Keyboard.KeyCodes.END:case Barge.Keyboard.KeyCodes.ESC:case Barge.Keyboard.KeyCodes.HOME:case Barge.Keyboard.KeyCodes.INSERT:case Barge.Keyboard.KeyCodes.LEFT:case Barge.Keyboard.KeyCodes.MAC_FF_META:case Barge.Keyboard.KeyCodes.META:case Barge.Keyboard.KeyCodes.NUMLOCK:case Barge.Keyboard.KeyCodes.NUM_CENTER:case Barge.Keyboard.KeyCodes.PAGE_DOWN:case Barge.Keyboard.KeyCodes.PAGE_UP:case Barge.Keyboard.KeyCodes.PAUSE:case Barge.Keyboard.KeyCodes.PHANTOM:case Barge.Keyboard.KeyCodes.PRINT_SCREEN:case Barge.Keyboard.KeyCodes.RIGHT:case Barge.Keyboard.KeyCodes.SCROLL_LOCK:case Barge.Keyboard.KeyCodes.SHIFT:case Barge.Keyboard.KeyCodes.UP:case Barge.Keyboard.KeyCodes.VK_NONAME:case Barge.Keyboard.KeyCodes.WIN_KEY:case Barge.Keyboard.KeyCodes.WIN_KEY_RIGHT:return!1;
case Barge.Keyboard.KeyCodes.WIN_KEY_FF_LINUX:return!Barge.userAgent.GECKO;default:return a.keyCode<Barge.Keyboard.KeyCodes.FIRST_MEDIA_KEY||a.keyCode>Barge.Keyboard.KeyCodes.LAST_MEDIA_KEY}},isModifierKey:function(a){return a.shiftKey||a.ctrlKey||a.altKey},isAlphaKey:function(a){return 65<=a.keyCode&&90>=a.keyCode},isNumericKey:function(a){return 48<=a.keyCode&&57>=a.keyCode},isArrowKey:function(a){return 37<=a.keyCode&&40>=a.keyCode},isLeftOrRightArrowKey:function(a){return a.keyCode===this.kc.RIGHT||
a.keyCode===this.kc.LEFT},isUpOrDownKey:function(a){return a.keyCode===this.kc.UP||a.keyCode===this.kc.DOWN},isCharacterKey:function(a){if(a>=Barge.Keyboard.KeyCodes.ZERO&&a<=Barge.Keyboard.KeyCodes.NINE||a>=Barge.Keyboard.KeyCodes.NUM_ZERO&&a<=Barge.Keyboard.KeyCodes.NUM_MULTIPLY||a>=Barge.Keyboard.KeyCodes.A&&a<=Barge.Keyboard.KeyCodes.Z||(Barge.userAgent.WEBKIT||Barge.userAgent.EDGE)&&0===a)return!0;switch(a){case Barge.Keyboard.KeyCodes.SPACE:case Barge.Keyboard.KeyCodes.PLUS_SIGN:case Barge.Keyboard.KeyCodes.QUESTION_MARK:case Barge.Keyboard.KeyCodes.AT_SIGN:case Barge.Keyboard.KeyCodes.NUM_PLUS:case Barge.Keyboard.KeyCodes.NUM_MINUS:case Barge.Keyboard.KeyCodes.NUM_DOT:case Barge.Keyboard.KeyCodes.NUM_DIVISION:case Barge.Keyboard.KeyCodes.SEMICOLON:case Barge.Keyboard.KeyCodes.FF_SEMICOLON:case Barge.Keyboard.KeyCodes.DASH:case Barge.Keyboard.KeyCodes.EQUALS:case Barge.Keyboard.KeyCodes.FF_EQUALS:case Barge.Keyboard.KeyCodes.COMMA:case Barge.Keyboard.KeyCodes.DOT:case Barge.Keyboard.KeyCodes.SLASH:case Barge.Keyboard.KeyCodes.APOSTROPHE:case Barge.Keyboard.KeyCodes.SINGLE_QUOTE:case Barge.Keyboard.KeyCodes.OPEN_SQUARE_BRACKET:case Barge.Keyboard.KeyCodes.BACKSLASH:case Barge.Keyboard.KeyCodes.CLOSE_SQUARE_BRACKET:return!0;
default:return!1}},firesKeyPressEvent:function(a,f,d,e,c){if(!(Barge.userAgent.IE||Barge.userAgent.EDGE||Barge.userAgent.WEBKIT&&Barge.userAgent.isVersionOrHigher("525")))return!0;if(Barge.userAgent.MAC&&c)return Barge.Keyboard.isCharacterKey(a);if(c&&!e)return!1;Barge.utils.isNumber(f)&&(f=Barge.Keyboard.normalizeKeyCode(f));if(!d&&(f===Barge.Keyboard.KeyCodes.CTRL||f===Barge.Keyboard.ALT||Barge.userAgent.MAC&&f===Barge.Keyboard.KeyCodes.META))return!1;if((Barge.userAgent.WEBKIT||Barge.userAgent.EDGE)&&
e&&d)switch(a){case Barge.Keyboard.KeyCodes.BACKSLASH:case Barge.Keyboard.KeyCodes.OPEN_SQUARE_BRACKET:case Barge.Keyboard.KeyCodes.CLOSE_SQUARE_BRACKET:case Barge.Keyboard.KeyCodes.TILDE:case Barge.Keyboard.KeyCodes.SEMICOLON:case Barge.Keyboard.KeyCodes.DASH:case Barge.Keyboard.KeyCodes.EQUALS:case Barge.Keyboard.KeyCodes.COMMA:case Barge.Keyboard.KeyCodes.DOT:case Barge.Keyboard.KeyCodes.SLASH:case Barge.Keyboard.KeyCodes.APOSTROPHE:case Barge.Keyboard.KeyCodes.SINGLE_QUOTE:return!1}if(Barge.userAgent.IE&&
e&&f===a)return!1;switch(a){case Barge.Keyboard.KeyCodes.ENTER:return!0;case Barge.Keyboard.KeyCodes.ESC:return!(Barge.userAgent.WEBKIT||Barge.userAgent.EDGE)}return Barge.Keyboard.isCharacterKey(a)},normalizeKeyCode:function(a){return Barge.userAgent.GECKO?Barge.Keyboard.normalizeGeckoKeyCode(a):Barge.userAgent.MAC&&Barge.userAgent.WEBKIT?Barge.Keyboard.normalizeMacWebKitKeyCode(a):a},normalizeMacWebKitKeyCode:function(a){switch(a){case Barge.Keyboard.KeyCodes.MAC_WK_CMD_RIGHT:return Barge.Keyboard.KeyCodes.META;
default:return a}},normalizeGeckoKeyCode:function(a){switch(a){case Barge.Keyboard.KeyCodes.FF_EQUALS:return Barge.Keyboard.KeyCodes.EQUALS;case Barge.Keyboard.KeyCodes.FF_SEMICOLON:return Barge.Keyboard.KeyCodes.SEMICOLON;case Barge.Keyboard.KeyCodes.FF_DASH:return Barge.Keyboard.KeyCodes.DASH;case Barge.Keyboard.KeyCodes.MAC_FF_META:return Barge.Keyboard.KeyCodes.META;case Barge.Keyboard.KeyCodes.WIN_KEY_FF_LINUX:return Barge.Keyboard.KeyCodes.WIN_KEY;default:return a}}};Barge.Keyboard.shortcut=
function(){for(var a=e.getElementsByAttribute("data-shortcut"),f=a.some(function(a){return"ctrl,s"===a.getAttribute("data-shortcut").toString()}),k=0;k<a.length;k++)(function(k){d.addEventListener("keydown",function(c){function g(){b.preventDefault();a[k].click()}var b=c?c:d.event;c=a[k].getAttribute("data-shortcut");c=m.isEmpty(c)?"":c.split(",");var h=String.fromCharCode(b.keyCode).toLowerCase();e.defined(c[1]);e.defined(c[2]);f||!b.ctrlKey||"s"!=h||b.shiftKey||b.altKey||b.preventDefault();var l=
c.length;1===l?(b.shiftKey||b.ctrlKey||b.altKey||c[0]===h&&g(),b.shiftKey||b.ctrlKey||b.altKey||27!==b.keyCode?b.shiftKey||b.ctrlKey||b.altKey||13!==b.keyCode||"return"!==c[0]&&"enter"!==c[0]||g():"esc"!==c[0]&&"escape"!==c[0]||g()):2===l&&("ctrl"===c[0]?!b.ctrlKey||c[1]!==h||b.shiftKey||b.altKey||g():"shift"===c[0]?b.shiftKey&&c[1]===h&&!b.ctrlKey&&b.altKey&&g():"alt"===c[0]&&(!b.altKey||c[1]!==h||b.ctrlKey||b.shiftKey||g()));3===l&&(-1<c.indexOf("ctrl")&&-1<c.indexOf("alt")?b.ctrlKey&&b.altKey&&
!b.shiftKey&&c[2]===h&&g():-1<c.indexOf("ctrl")&&-1<c.indexOf("shift")?b.ctrlKey&&b.shiftKey&&!b.altKey&&c[2]===h&&g():-1<c.indexOf("shift")&&-1<c.indexOf("alt")&&b.shiftKey&&b.altKey&&!b.ctrlKey&&c[2]===h&&g());4===l&&-1<c.indexOf("ctrl")&&-1<c.indexOf("shift")&&-1<c.indexOf("alt")&&b.ctrlKey&&b.altKey&&b.shiftKey&&c[3]===h&&g()})})(k)};void 0!==Barge.utils.getElementsByAttribute("data-shortcut",!0)&&new Barge.Keyboard.shortcut;return Barge.Keyboard});Barge.utils.provide("Barge.Keyboard.KeyCodes");
Barge.Keyboard.KeyCodes={WIN_KEY_FF_LINUX:0,MAC_ENTER:3,BACKSPACE:8,TAB:9,NUM_CENTER:12,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PLUS_SIGN:43,PRINT_SCREEN:44,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,FF_SEMICOLON:59,FF_EQUALS:61,FF_DASH:173,QUESTION_MARK:63,AT_SIGN:64,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,
P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,META:91,WIN_KEY_RIGHT:92,CONTEXT_MENU:93,NUM_ZERO:96,NUM_ONE:97,NUM_TWO:98,NUM_THREE:99,NUM_FOUR:100,NUM_FIVE:101,NUM_SIX:102,NUM_SEVEN:103,NUM_EIGHT:104,NUM_NINE:105,NUM_MULTIPLY:106,NUM_PLUS:107,NUM_MINUS:109,NUM_DOT:110,NUM_DIVISION:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,NUMLOCK:144,SCROLL_LOCK:145,FIRST_MEDIA_KEY:166,LAST_MEDIA_KEY:183,SEMICOLON:186,DASH:189,EQUALS:187,COMMA:188,DOT:190,
SLASH:191,APOSTROPHE:192,TILDE:192,SINGLE_QUOTE:222,OPEN_SQUARE_BRACKET:219,BACKSLASH:220,CLOSE_SQUARE_BRACKET:221,WIN_KEY:224,MAC_FF_META:224,MAC_WK_CMD_LEFT:91,MAC_WK_CMD_RIGHT:93,WIN_IME:229,VK_NONAME:252,PHANTOM:255};
